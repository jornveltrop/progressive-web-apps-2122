function init(){initBookmark(),placeBookmarks()}init();async function handleBookmark(o,a,e){await a.match(o)?await a.delete(o)?e.src="/images/bookmark.svg":console.log("Bookmark error"):(e.src="/images/bookmark_active.svg",fetch(o).then(e=>a.put(o,e)).catch(()=>{e.src="/images/bookmark.svg",console.log("Bookmark error")}))}async function initBookmark(){const e=document.querySelectorAll("[bookmark]");if("serviceWorker"in navigator){const t=await caches.open("bookmarks");e.forEach(async function(o){var a="detail/"+o.getAttribute("bookmarkID");o.addEventListener("click",function(e){console.log(a),handleBookmark(a,t,o)});var e=await t.match(a);o.src=e?"/images/bookmark_active.svg":"/images/bookmark.svg"})}}async function placeBookmarks(){if("serviceWorker"in navigator){const a=document.querySelector(".bookmarks");if(null!=a){let o="";caches.open("bookmarks").then(function(e){e.keys().then(e=>{console.log(e),0<e.length?(e.forEach(e=>{e=getPathName(e.url);o+='<a href="'+e+'">'+e+"</a>"}),o+='<a class="deleteBookmarks" deleteBookmarks>Verwijder alle opgeslagen items</a>'):o="<h3>Helaas...</h3><p>Je hebt nog geen opgeslagen items</p>",a.insertAdjacentHTML("afterBegin",o)}).then(e=>{const o=document.querySelector(".deleteBookmarks");o&&o.addEventListener("click",deleteBookmarks)})})}}}async function deleteBookmarks(){"serviceWorker"in navigator&&null!=document.querySelector(".bookmarks")&&caches.delete("bookmarks").then(location.reload()).catch(e=>{console.log(e)})}function getPathName(e){return new URL(e).pathname}